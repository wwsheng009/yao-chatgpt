System.register(["react/jsx-runtime","react","../chat.less.js"],function(e){"use strict";var t,n,i,l;return{setters:[function(e){t=e.jsx,n=e.jsxs},function(e){i=e.default},function(e){l=e.default}],execute:function(){let{useState:s}=i;e("default",e=>{let[a,r]=s(""),[o,c]=s(void 0),[d,f]=s([{content:"你好,AI。",right:!0},{content:"你好,有什么可以帮到您。",right:!1}]);async function x(){let e=await m(a);console.log(e),f([...d,{content:e.message,right:!1}]),c(e.session_id)}async function h(){f([...d,{content:a,right:!0}])}async function m(e){let t=await fetch("/api/ai/ask",{method:"POST",body:JSON.stringify({prompt:e,session_id:o}),headers:{"Content-Type":"application/json"}});return await t.json()}i.useEffect(()=>{d&&d[d.length-1]&&!0==d[d.length-1].right&&(r(""),x())},[d]);let g=e=>{r(e.target.value)};return t("div",{className:"xgen-form-item",children:n("div",{className:"xgen-row xgen-form-item-row",children:[t("div",{className:"xgen-col xgen-form-item-label"}),t("div",{className:"xgen-col xgen-form-item-control",children:t("div",{className:"xgen-form-item-control-input",children:n("div",{className:l.box,style:{display:"flex",flexDirection:"column",height:"calc(100vh - 262px)",width:"100%"},children:[t("div",{style:{flex:1,display:"flex",width:"100%",flexDirection:"column",fontSize:"1.5rem",overflow:"auto"},children:d?.map(e=>e.right?t("div",{style:{display:"flex",justifyContent:"flex-end",margin:"10px",padding:"10px"},children:t("div",{style:{maxWidth:"80%"},children:e.content})}):t("div",{style:{display:"flex",margin:"10px",border:"solid 1px gray",borderRadius:"10px",padding:"10px"},children:t("div",{style:{maxWidth:"80%"},children:e.content})}))}),n("div",{style:{display:"flex"},children:[t("textarea",{style:{flex:1},onChange:g,value:a}),t("button",{onClick:h,children:"提问"})]})]})})})]})})})}}});
